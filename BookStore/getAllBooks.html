<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
    <style type="text/css">
        body{
            background-image: url("booksystem.jpg");;
        }
       div {
margin: 10px;
padding: 10px;
        }
        p{
           font-family: "Times New Roman", Times, serif;
           font-size: 20px;
            font-weight: bold;
        }
        .div2{
          background: white;
        }
        h1{
          color: white;
          margin-top: 30px;
        }
    </style>
</head>
<body>
    <center>
        
        <h1>All Books</h1>
    </center>
    
	<!-- Book name : <input type="text" id="name"/>
	<br>
	Author name : <input type="text" id="authorName"/>
	<br>
	Book price : <input type="text" id="price"/>
	<br>
	Book Publisher : <input type="text" id="publisher"/>
	<br>
	Book desc : <input type="text" id="desc"/>
	<br>
	<button>submit</button> -->
<div id="allBooks">

</div>

</body>
<script type="text/javascript">
	
	var xhr = new XMLHttpRequest();
var url = "http://127.0.0.1:9000/BookStore/getAllBooks";
xhr.open("get", url, true);
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
xhr.setRequestHeader("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept, Authorization");
xhr.setRequestHeader("Access-Control-Allow-Credentials", "true");
xhr.setRequestHeader("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE,OPTIONS,HEAD");

xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
        var json = JSON.parse(xhr.responseText);
        console.log(json);
		//myCallBack(json)
        createTemplate(json)
    }
};

var deleteee={
	"id":1639724836994,
	"key":"123"
};

var data = JSON.stringify(
deleteee
);
xhr.send(data);

function createTemplate(json){
    let div=document.createElement("div");
    let Res=json.map.data
    console.log(Res);
    for(let i=0;i<Res.length;i++){
    let div2=document.createElement("div");
    div2.setAttribute("id",Res[i].Id);
    div2.setAttribute("class","div2");


    let id=document.createElement("p");
    id.innerHTML="ID: "+Res[i].Id;
    let name=document.createElement("p");
    name.innerHTML="BookName : "+Res[i].BookName;
    let AuthorName=document.createElement("p");
    AuthorName.innerHTML="AuthorName : "+Res[i].AuthorName;
    let Price=document.createElement("p");
    Price.innerHTML="Price : "+Res[i].price;
    let Des=document.createElement("p");
    Des.innerHTML="Description : "+Res[i].description;
    let Publisher=document.createElement("p");
    Publisher.innerHTML="Publisher : "+Res[i].publisher
    div2.appendChild(id);
    div2.appendChild(name);
    div2.appendChild(AuthorName);
    div2.appendChild(Price);
    div2.appendChild(Des);
    div2.appendChild(Publisher);

    div2.style.border = "2px solid Tomato"
    console.log(Publisher)
    console.log(div2);
    document.getElementById("allBooks").appendChild(div2);
    }
    
}
</script>
</html>